(()=>{"use strict";const e=e=>{let t=null,r=[];const o=(e,o)=>{o.isValidAttack(e)&&o.receiveAttack(e),r.push(e),t=!1},c=()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())],l=e=>{const o=c();for(;!e.isValidAttack(o);)o=c;e.receiveAttack(o),r.push(o),t=!1};return{humanPlayerAttack:o,computerPlayerAttack:l,attack:"human"===e?o:l,isMyTurn:t,myAttacks:r}},t=()=>{const e=[],t=[],r=[],o=[],c=(r,o)=>{const c=(e=>{let t=0,r=!1,o=e;return{hit:()=>(t+=1,t),isSunk:()=>(t===o&&(r=!0),r),hits:t,sunk:r,shipLength:o}})(o),[l,a]=r;for(let t=0;t<o;t++)if(null!==e[l+t][a])throw new Error("Cannot place ship on an occupied spot");for(let t=0;t<o;t++)e[l+t][a]=c;t.push(c)};return(()=>{for(let t=0;t<10;t++){e[t]=[];for(let r=0;r<10;r++)e[t][r]=null}})(),{placeShip:c,grid:e,ships:t,receiveAttack:t=>{const[c,l]=t;null===e[c][l]?(r.push([c,l]),e[c][l]=0):(e[c][l].hit(),o.push([c,l]))},placeRandomShips:()=>{const e=[5,4,3,3,2];for(let t=0;t<e.length;t++){let r=!1;for(;!r;){let o=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());try{c([o,l],e[t]),r=!0}catch(e){}}}return t},missedAttacks:r,successfulAttacks:o,allShipsSunk:()=>t.every((e=>e.isSunk())),isValidAttack:e=>{const[t,c]=e;for(const[e,r]of o)if(e===t&&r===c)return!1;for(const[e,o]of r)if(e===t&&o===c)return!1;return!0},getShips:()=>t,getGrid:()=>e}},r=(e("human"),e("computer"),t());t().placeRandomShips();const o=(e=>{const t=[5,4,3,3,2];let r=0;const o=c=>{const l=c.target.getAttribute("data-coordinate"),[a,n]=JSON.parse(l);e.placeShip([a,n],t[r]);for(let e=0;e<t[r];e++)document.querySelector(`.cell[data-coordinate="[${a+e}, ${n}]"]`).className="ship-cell";r++,r>=t.length&&document.querySelector(".pre-board").removeEventListener("click",o)};return{createCells:e=>{const t=document.querySelector(e);t.style.gridTemplateColumns="repeat(10, 1fr)",t.style.gridTemplateRows="repeat(10, 1fr)";for(let e=0;e<100;e++){let r=document.createElement("div");r.className="cell";const o=e%10,c=Math.floor(e/10);r.setAttribute("data-coordinate",`[${o}, ${c}]`),t.insertAdjacentElement("beforeend",r)}},insertShip:()=>{document.querySelector(".pre-board").addEventListener("click",o)},closeModal:()=>{const e=document.querySelector(".begin"),t=document.querySelector(".welcomeScreen");e.addEventListener("click",(()=>{t.close()}))}}})(r);o.createCells(".pre-board"),o.createCells(".human"),o.createCells(".computer"),o.insertShip(),o.closeModal()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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N0MsR0FvQ2lCSSxXQWJGLEtBQ0VkLFNBQVNDLGNBQWMsY0FDL0JjLGlCQUFpQixRQUFTLEVBQXFCLEVBVzNCQyxXQVJkLEtBQ2YsTUFBTUMsRUFBUWpCLFNBQVNDLGNBQWMsVUFDL0JpQixFQUFnQmxCLFNBQVNDLGNBQWMsa0JBQzdDZ0IsRUFBTUYsaUJBQWlCLFNBQVMsS0FDNUJHLEVBQWNDLE9BQU0sR0FDdkIsRUFJUixFSTNDaUIsQ0FBTzlCLEdBRXpCRyxFQUFVWSxZQUFZLGNBQ3RCWixFQUFVWSxZQUFZLFVBQ3RCWixFQUFVWSxZQUFZLGFBRXRCWixFQUFVc0IsYUFDVnRCLEVBQVV3QixZIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL2RvbS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21vZHVsZXMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbW9kdWxlcy9nYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tb2R1bGVzL3NoaXBzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXZlbnRzID0gKChib2FyZCkgPT4ge1xuICAgIGNvbnN0IHNoaXBMZW5ndGhzID0gWzUsIDQsIDMsIDMsIDJdO1xuICAgIGxldCB0aGlzU2hpcCA9IDBcblxuICAgIGNvbnN0IGNyZWF0ZUNlbGxzID0gKGNvbnRhaW5lcikgPT4ge1xuICAgICAgICBjb25zdCBkaW1lbnNpb25zID0gMTBcbiAgICAgICAgY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcilcbiAgICAgICAgYm9hcmQuc3R5bGUuZ3JpZFRlbXBsYXRlQ29sdW1ucyA9IGByZXBlYXQoJHtkaW1lbnNpb25zfSwgMWZyKWA7XG4gICAgICAgIGJvYXJkLnN0eWxlLmdyaWRUZW1wbGF0ZVJvd3MgPSBgcmVwZWF0KCR7ZGltZW5zaW9uc30sIDFmcilgO1xuICAgIFxuICAgICAgICBsZXQgbnVtRGl2cyA9IGRpbWVuc2lvbnMgKiBkaW1lbnNpb25zO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bURpdnM7IGkrKyl7XG4gICAgICAgICAgICBsZXQgY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOyBcbiAgICAgICAgICAgIGNlbGwuY2xhc3NOYW1lID0gJ2NlbGwnXG4gICAgICAgICAgICBjb25zdCB4ID0gaSAlIGRpbWVuc2lvbnM7IC8vIENhbGN1bGF0ZSB4IGNvb3JkaW5hdGVcbiAgICAgICAgICAgIGNvbnN0IHkgPSBNYXRoLmZsb29yKGkgLyBkaW1lbnNpb25zKTsgLy8gQ2FsY3VsYXRlIHkgY29vcmRpbmF0ZVxuICAgICAgICAgICAgY2VsbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtY29vcmRpbmF0ZScsIGBbJHt4fSwgJHt5fV1gKVxuICAgICAgICAgICAgYm9hcmQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIGNlbGwpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXRyaWV2ZUNvb3JkaW5hdGVzID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWNrZWRDZWxsID0gZXZlbnQudGFyZ2V0XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gY2xpY2tlZENlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvb3JkaW5hdGUnKVxuICAgICAgICBjb25zdCBbeCwgeV0gPSBKU09OLnBhcnNlKGNvb3JkaW5hdGVzKVxuICAgICAgICBcbiAgICAgICAgYm9hcmQucGxhY2VTaGlwKFt4LCB5XSxzaGlwTGVuZ3Roc1t0aGlzU2hpcF0pXG4gICAgICAgIFxuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcExlbmd0aHNbdGhpc1NoaXBdOyBpKyspe1xuICAgICAgICAgICAgbGV0IHNoaXBDZWxsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmNlbGxbZGF0YS1jb29yZGluYXRlPVwiWyR7eCtpfSwgJHt5fV1cIl1gKVxuICAgICAgICAgICAgc2hpcENlbGwuY2xhc3NOYW1lID0gJ3NoaXAtY2VsbCdcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNTaGlwKytcbiAgICAgICAgaWYgKHRoaXNTaGlwID49IHNoaXBMZW5ndGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcHJlQm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlLWJvYXJkJyk7XG4gICAgICAgICAgICBwcmVCb2FyZC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJldHJpZXZlQ29vcmRpbmF0ZXMpO1xuICAgICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnNlcnRTaGlwID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwcmVCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmUtYm9hcmQnKVxuICAgICAgICBwcmVCb2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChyZXRyaWV2ZUNvb3JkaW5hdGVzKSlcbiAgICB9XG5cbiAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBiZWdpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iZWdpbicpXG4gICAgICAgIGNvbnN0IHdlbGNvbWVTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VsY29tZVNjcmVlbicpXG4gICAgICAgIGJlZ2luLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgd2VsY29tZVNjcmVlbi5jbG9zZSgpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHtjcmVhdGVDZWxscywgaW5zZXJ0U2hpcCwgY2xvc2VNb2RhbH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBldmVudHMiLCJjb25zdCBwbGF5ZXJGYWN0b3J5ID0gKHBsYXllclR5cGUpID0+IHtcbiAgICBsZXQgaXNNeVR1cm4gPSBudWxsXG4gICAgbGV0IG15QXR0YWNrcyA9IFtdXG5cbiAgICBjb25zdCBodW1hblBsYXllckF0dGFjayA9IChjb29yZGluYXRlcywgYm9hcmQpID0+IHtcbiAgICAgICAgaWYgKGJvYXJkLmlzVmFsaWRBdHRhY2soY29vcmRpbmF0ZXMpKXtcbiAgICAgICAgICAgIGJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpXG4gICAgICAgIH1cbiAgICAgICAgbXlBdHRhY2tzLnB1c2goY29vcmRpbmF0ZXMpXG4gICAgICAgIGlzTXlUdXJuID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBnZXRSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgbGV0IHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgcmV0dXJuIFt4LCB5XVxuICAgIH1cblxuICAgIGNvbnN0IGNvbXB1dGVyUGxheWVyQXR0YWNrID0gKGJvYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gZ2V0UmFuZG9tQ29vcmRpbmF0ZXMoKVxuICAgICAgICB3aGlsZSghYm9hcmQuaXNWYWxpZEF0dGFjayhjb29yZGluYXRlcykpe1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSBnZXRSYW5kb21Db29yZGluYXRlc1xuICAgICAgICB9XG4gICAgICAgIGJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRpbmF0ZXMpXG4gICAgICAgIG15QXR0YWNrcy5wdXNoKGNvb3JkaW5hdGVzKVxuICAgICAgICBpc015VHVybiA9IGZhbHNlXG4gICAgfVxuXG4gICAgY29uc3QgYXR0YWNrID0gcGxheWVyVHlwZSA9PT0gXCJodW1hblwiID8gaHVtYW5QbGF5ZXJBdHRhY2sgOiBjb21wdXRlclBsYXllckF0dGFjaztcblxuICAgIHJldHVybntodW1hblBsYXllckF0dGFjaywgY29tcHV0ZXJQbGF5ZXJBdHRhY2ssIGF0dGFjaywgaXNNeVR1cm4sXG4gICAgICAgICAgIG15QXR0YWNrc31cbn1cblxuZXhwb3J0IGRlZmF1bHQgcGxheWVyRmFjdG9yeVxuLy9tb2R1bGUuZXhwb3J0cyA9IHBsYXllckZhY3RvcnkiLCJpbXBvcnQgc2hpcEZhY3RvcnkgZnJvbSAnLi9zaGlwcydcblxuY29uc3QgZ2FtZWJvYXJkRmFjdG9yeSA9ICgpID0+IHtcbiAgICBjb25zdCBncmlkID0gW11cbiAgICBjb25zdCBzaGlwcyA9IFtdXG4gICAgY29uc3QgbWlzc2VkQXR0YWNrcyA9IFtdXG4gICAgY29uc3Qgc3VjY2Vzc2Z1bEF0dGFja3MgPSBbXVxuXG4gICAgY29uc3QgcG9wdWxhdGVHcmlkID0gKCkgPT4ge1xuICAgICAgICBsZXQgcm93cyA9IDEwXG4gICAgICAgIGxldCBjb2xzID0gMTBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJvd3M7IGkrKyl7XG4gICAgICAgICAgICBncmlkW2ldID0gW107XG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgY29sczsgaisrKXtcbiAgICAgICAgICAgICAgICBncmlkW2ldW2pdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGxhY2VTaGlwID0gKGNvb3JkaW5hdGVzLCBzaGlwTGVuZ3RoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXAgPSBzaGlwRmFjdG9yeShzaGlwTGVuZ3RoKVxuICAgICAgICBjb25zdCBbeCwgeV0gPSBjb29yZGluYXRlcztcbiAgICAgICAgXG4gICAgICAgIGZvcihsZXQgaSA9MDsgaSA8IHNoaXBMZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICBpZihncmlkW3ggKyBpXVt5XSAhPT0gbnVsbCl7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgcGxhY2Ugc2hpcCBvbiBhbiBvY2N1cGllZCBzcG90JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBzaGlwTGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgZ3JpZFt4ICsgaV1beV0gPSBzaGlwO1xuICAgICAgICB9XG5cbiAgICAgICAgc2hpcHMucHVzaChzaGlwKVxuICAgIH1cblxuICAgIGNvbnN0IHBsYWNlUmFuZG9tU2hpcHMgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNoaXBMZW5ndGhzID0gWzUsIDQsIDMsIDMsIDJdO1xuICAgICAgICBcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHNoaXBMZW5ndGhzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGxldCBwbGFjZWQgPSBmYWxzZVxuICAgICAgICAgICAgd2hpbGUoIXBsYWNlZCl7XG4gICAgICAgICAgICAgICAgbGV0IHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgICAgICAgICAgICBsZXQgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlU2hpcChbeCx5XSwgc2hpcExlbmd0aHNbaV0pXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcil7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoaXBzXG4gICAgICB9O1xuXG4gICAgY29uc3QgcmVjZWl2ZUF0dGFjayA9IChjb29yZGluYXRlcykgPT4ge1xuICAgICAgICBjb25zdCBbeCx5XSA9IGNvb3JkaW5hdGVzXG4gICAgICAgIGlmKGdyaWRbeF1beV0gPT09IG51bGwpe1xuICAgICAgICAgICAgbWlzc2VkQXR0YWNrcy5wdXNoKFt4LHldKVxuICAgICAgICAgICAgZ3JpZFt4XVt5XSA9IDAgLy8wIHdpbGwgaW5kaWNhdGUgYSBncmlkIHBvc2l0aW9uIHRoYXQgd2FzIGF0dGFja2VkIGFuZCBtaXNzZWRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzaGlwID0gZ3JpZFt4XVt5XVxuICAgICAgICAgICAgc2hpcC5oaXQoKVxuICAgICAgICAgICAgc3VjY2Vzc2Z1bEF0dGFja3MucHVzaChbeCx5XSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdldFNoaXBzID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gc2hpcHNcbiAgICB9XG5cbiAgICBjb25zdCBnZXRHcmlkID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gZ3JpZFxuICAgIH1cblxuICAgIGNvbnN0IGFsbFNoaXBzU3VuayA9ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKVxuICAgIH1cblxuICAgIGNvbnN0IGlzVmFsaWRBdHRhY2sgPSAoY29vcmRpbmF0ZXMpID0+IHtcbiAgICAgICAgY29uc3QgW3gsIHldID0gY29vcmRpbmF0ZXM7XG4gICAgICAgIGZvciAoY29uc3QgW2F0dGFja1gsIGF0dGFja1ldIG9mIHN1Y2Nlc3NmdWxBdHRhY2tzKSB7XG4gICAgICAgICAgICBpZiAoYXR0YWNrWCA9PT0geCAmJiBhdHRhY2tZID09PSB5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgW2F0dGFja1gsIGF0dGFja1ldIG9mIG1pc3NlZEF0dGFja3MpIHtcbiAgICAgICAgICAgIGlmIChhdHRhY2tYID09PSB4ICYmIGF0dGFja1kgPT09IHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBwb3B1bGF0ZUdyaWQoKVxuXG4gICAgcmV0dXJue3BsYWNlU2hpcCwgZ3JpZCwgc2hpcHMsIHJlY2VpdmVBdHRhY2ssIHBsYWNlUmFuZG9tU2hpcHMsIFxuICAgICAgICBtaXNzZWRBdHRhY2tzLCBzdWNjZXNzZnVsQXR0YWNrcywgYWxsU2hpcHNTdW5rLCBpc1ZhbGlkQXR0YWNrLCBcbiAgICAgICAgZ2V0U2hpcHMsIGdldEdyaWR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZ2FtZWJvYXJkRmFjdG9yeVxuLy9tb2R1bGUuZXhwb3J0cyA9IGdhbWVib2FyZEZhY3RvcnkiLCJjb25zdCBzaGlwRmFjdG9yeSA9IChsZW5ndGgpID0+IHtcbiAgICBsZXQgaGl0cyA9IDAgXG4gICAgbGV0IHN1bmsgPSBmYWxzZVxuICAgIGxldCBzaGlwTGVuZ3RoID0gbGVuZ3RoXG5cbiAgICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgICAgIGhpdHMgKz0gMVxuICAgICAgICByZXR1cm4gaGl0c1xuICAgIH1cblxuICAgIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICAgICAgaWYoaGl0cyA9PT0gc2hpcExlbmd0aCl7XG4gICAgICAgICAgICBzdW5rID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdW5rXG4gICAgfVxuXG4gICAgcmV0dXJuIHtoaXQsIGlzU3VuaywgaGl0cywgc3Vuaywgc2hpcExlbmd0aH1cbn1cbmV4cG9ydCBkZWZhdWx0IHNoaXBGYWN0b3J5XG4vL21vZHVsZS5leHBvcnRzID0gc2hpcEZhY3RvcnkiLCJpbXBvcnQgZXZlbnRzIGZyb20gXCIuL21vZHVsZXMvZG9tXCI7XG5pbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tIFwiLi9tb2R1bGVzL3BsYXllclwiXG5pbXBvcnQgZ2FtZWJvYXJkRmFjdG9yeSBmcm9tIFwiLi9tb2R1bGVzL2dhbWVib2FyZFwiXG5cbmNvbnN0IGh1bWFuUGxheWVyID0gcGxheWVyRmFjdG9yeSgnaHVtYW4nKSAvL2NyZWF0ZSBwbGF5ZXIgaW5zdGFuY2VzXG5jb25zdCBhaVBsYXllciA9IHBsYXllckZhY3RvcnkoJ2NvbXB1dGVyJylcblxuY29uc3QgaHVtYW5HYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KCkgLy9jcmVhdGUgYm9hcmQgaW5zdGFuY2VzIFxuY29uc3QgYWlHYW1lYm9hcmQgPSBnYW1lYm9hcmRGYWN0b3J5KClcblxuYWlHYW1lYm9hcmQucGxhY2VSYW5kb21TaGlwcygpIC8vcG9wdWxhdGUgYWkgYm9hcmQgd2l0aCBzaGlwc1xuXG5jb25zdCBkb21FdmVudHMgPSBldmVudHMoaHVtYW5HYW1lYm9hcmQpXG5cbmRvbUV2ZW50cy5jcmVhdGVDZWxscygnLnByZS1ib2FyZCcpXG5kb21FdmVudHMuY3JlYXRlQ2VsbHMoJy5odW1hbicpXG5kb21FdmVudHMuY3JlYXRlQ2VsbHMoJy5jb21wdXRlcicpXG5cbmRvbUV2ZW50cy5pbnNlcnRTaGlwKClcbmRvbUV2ZW50cy5jbG9zZU1vZGFsKCkiXSwibmFtZXMiOlsicGxheWVyVHlwZSIsImlzTXlUdXJuIiwibXlBdHRhY2tzIiwiaHVtYW5QbGF5ZXJBdHRhY2siLCJjb29yZGluYXRlcyIsImJvYXJkIiwiaXNWYWxpZEF0dGFjayIsInJlY2VpdmVBdHRhY2siLCJwdXNoIiwiZ2V0UmFuZG9tQ29vcmRpbmF0ZXMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb21wdXRlclBsYXllckF0dGFjayIsImF0dGFjayIsImdyaWQiLCJzaGlwcyIsIm1pc3NlZEF0dGFja3MiLCJzdWNjZXNzZnVsQXR0YWNrcyIsInBsYWNlU2hpcCIsInNoaXBMZW5ndGgiLCJzaGlwIiwibGVuZ3RoIiwiaGl0cyIsInN1bmsiLCJoaXQiLCJpc1N1bmsiLCJ4IiwieSIsImkiLCJFcnJvciIsImoiLCJwb3B1bGF0ZUdyaWQiLCJwbGFjZVJhbmRvbVNoaXBzIiwic2hpcExlbmd0aHMiLCJwbGFjZWQiLCJlcnJvciIsImFsbFNoaXBzU3VuayIsImV2ZXJ5IiwiYXR0YWNrWCIsImF0dGFja1kiLCJnZXRTaGlwcyIsImdldEdyaWQiLCJodW1hbkdhbWVib2FyZCIsInBsYXllciIsImdhbWVib2FyZCIsImRvbUV2ZW50cyIsInRoaXNTaGlwIiwicmV0cmlldmVDb29yZGluYXRlcyIsImV2ZW50IiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiSlNPTiIsInBhcnNlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NOYW1lIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNyZWF0ZUNlbGxzIiwiY29udGFpbmVyIiwic3R5bGUiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwiZ3JpZFRlbXBsYXRlUm93cyIsImRpbWVuc2lvbnMiLCJjZWxsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImluc2VydEFkamFjZW50RWxlbWVudCIsImluc2VydFNoaXAiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VNb2RhbCIsImJlZ2luIiwid2VsY29tZVNjcmVlbiIsImNsb3NlIl0sInNvdXJjZVJvb3QiOiIifQ==